version: "2"

linters:
  default: all
  disable:
    - wsl # deprecated
    - recvcheck
    - noinlineerr
    - exhaustruct
  settings:
    errcheck:
      check-type-assertions: true
    mnd:
      checks: ["argument", "case", "condition", "operation", "return"] # minus "assign"
      ignored-numbers:
        - 1024 # KB
    depguard:
      rules:
        main:
          list-mode: strict
          allow:
            - $gostd
            - github.com/ii7102/schema-normalization
            - github.com/itchyny/gojq$
            - github.com/stretchr/testify/assert$
    exhaustive:
      default-signifies-exhaustive: true
      default-case-required: true
    wrapcheck:
      ignore-package-globs:
        - github.com/ii7102/schema-normalization/*
    copyloopvar:
      check-alias: true
    revive:
      enable-all-rules: true
      rules:
        - name: unexported-return
          disabled: true
        - name: package-comments
          disabled: true
        - name: line-length-limit
          arguments: [128]
        - name: cognitive-complexity
          arguments: [9]
        - name: function-length
          disabled: true # using funlen linter instead (has test file exclusion)
        - name: call-to-gc
          disabled: true # maybe add this in the future
        - name: flag-parameter
          disabled: true # maybe add this in the future
        - name: add-constant
          disabled: true # maybe add this in the future
  exclusions:
    rules:
      - path: 'validation/util\.go'
        linters:
          - gosec
      - path: '_test\.go'
        linters:
          - funlen
    generated: lax
    paths:
      - third_party$
      - builtin$
      - examples$
formatters:
  enable:
    - gci
    - gofmt
    - gofumpt
    - goimports
  exclusions:
    generated: lax
    paths:
      - third_party$
      - builtin$
      - examples$
